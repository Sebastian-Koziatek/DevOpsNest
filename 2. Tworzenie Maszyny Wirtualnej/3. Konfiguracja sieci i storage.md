![[nat vs briged.drawio.png]]

|Cecha|NAT|Bridged|
|---|---|---|
|IP VM|Wirtualne, prywatne|Z sieci fizycznej (np. DHCP)|
|WidocznoÅ›Ä‡ w sieci|Tylko dla hosta|Widoczna jak osobny komputer|
|PoÅ‚Ä…czenia przychodzÄ…ce|Utrudnione (port forwarding)|Bez problemu|
|Konfiguracja|Prosta, domyÅ›lna|MoÅ¼e wymagaÄ‡ ustawieÅ„ sieciowych|
|BezpieczeÅ„stwo|WiÄ™ksze|Mniejsze|

# RÃ³Å¼nica miÄ™dzy trybem sieciowym "Bridged" a "NAT" w maszynach wirtualnych

RÃ³Å¼nica miÄ™dzy **trybem sieciowym "Bridged"** a **"NAT"** w maszynach wirtualnych (np. VirtualBox, VMware Workstation Pro) dotyczy sposobu, w jaki maszyna wirtualna Å‚Ä…czy siÄ™ z sieciÄ… fizycznÄ… i jak jest widoczna w tej sieci.

---
## ğŸ”¹ NAT (Network Address Translation)

### Opis:
- Maszyna wirtualna korzysta z prywatnej, wirtualnej sieci tworzonej przez hypervisor.
- DziaÅ‚a za tÅ‚umaczeniem adresÃ³w (NAT), podobnie jak komputery w domowej sieci za routerem.
### Zalety:
- Bezpieczniejszy â€“ maszyna wirtualna nie jest bezpoÅ›rednio widoczna w sieci fizycznej.
- Nie wymaga dodatkowej konfiguracji.
- DziaÅ‚a od razu z dostÄ™pem do Internetu (jeÅ›li host go ma).
### Wady:
- Maszyna wirtualna nie jest dostÄ™pna z innych urzÄ…dzeÅ„ w sieci.
- Trudniej skonfigurowaÄ‡ usÅ‚ugi, ktÃ³re wymagajÄ… przychodzÄ…cych poÅ‚Ä…czeÅ„ (np. serwery).
### PrzykÅ‚ad:
- Maszyna ma adres IP `10.0.2.15` (lokalny dla VM), a ruch wychodzÄ…cy jest tÅ‚umaczony przez hosta.

---
## ğŸ”¹ Bridged (Mostkowany)

### Opis:
- Maszyna wirtualna jest "wpiÄ™ta" do fizycznej sieci tak jakby byÅ‚a osobnym urzÄ…dzeniem (np. laptopem).
- Otrzymuje IP z tego samego zakresu co inne urzÄ…dzenia w tej sieci (np. przez DHCP z routera).
### Zalety:
- PeÅ‚na widocznoÅ›Ä‡ w sieci â€“ moÅ¼na siÄ™ do niej dostaÄ‡ z innych komputerÃ³w.
- Idealne do testowania usÅ‚ug sieciowych (np. serwerÃ³w, dostÄ™pÃ³w zdalnych).
### Wady:
- Mniej bezpieczny â€“ VM moÅ¼e byÄ‡ naraÅ¼ona na ataki z sieci lokalnej.
- Wymaga dostÄ™pnego fizycznego interfejsu sieciowego.
### PrzykÅ‚ad:
- Host ma IP `192.168.1.10`, a VM dostaje IP `192.168.1.20` â€“ w tej samej sieci.
___

# Czym sÄ… wirtualne dyski?

**Wirtualne dyski** to pliki utworzone i zarzÄ…dzane przez oprogramowanie do wirtualizacji (np. VirtualBox, VMware, Hyper-V), ktÃ³re emulujÄ… fizyczne dyski twarde (HDD/SSD) w maszynach wirtualnych.

---

## ğŸ”¹ Co to jest wirtualny dysk?

To **zwykÅ‚y plik na dysku hosta**, ktÃ³ry jest traktowany przez maszynÄ™ wirtualnÄ… jak fizyczny dysk twardy. MoÅ¼e zawieraÄ‡ system operacyjny, dane uÅ¼ytkownika, aplikacje, itd.

---

## ğŸ”¸ Typowe formaty wirtualnych dyskÃ³w

| Format  | Platforma    | Opis                                   |
|---------|--------------|----------------------------------------|
| `.vdi`  | VirtualBox    | Natywny format VirtualBox              |
| `.vmdk` | VMware        | Natywny format VMware, wspierany teÅ¼ przez inne systemy |
| `.vhd`  | Hyper-V       | Starszy format Microsoft               |
| `.vhdx` | Hyper-V       | Nowszy, bardziej odporny na bÅ‚Ä™dy i wspierajÄ…cy wiÄ™ksze rozmiary |

---

## ğŸ”¸ Rodzaje wirtualnych dyskÃ³w

### 1. Dynamicznie przydzielany (dynamic disk)
- Zajmuje tylko tyle miejsca, ile rzeczywiÅ›cie jest zapisane.
- MoÅ¼e siÄ™ rozrastaÄ‡ do zdefiniowanego limitu (np. 50 GB).

### 2. Statycznie przydzielany (fixed-size disk)
- Od razu zajmuje caÅ‚Ä… przestrzeÅ„ na hoÅ›cie, nawet jeÅ›li VM jej nie wykorzystuje.
- Lepsza wydajnoÅ›Ä‡, szczegÃ³lnie przy duÅ¼ych operacjach I/O.

---

## ğŸ”¸ Funkcje wirtualnych dyskÃ³w

- **Tworzenie migawek (snapshot)** â€“ zapisuje stan dysku VM w danym momencie.
- **Klonowanie** â€“ kopiowanie caÅ‚ych dyskÃ³w jako szablonÃ³w.
- **PrzyÅ‚Ä…czanie jako dodatkowy dysk** â€“ np. do testÃ³w lub odzyskiwania danych.
- **Rozszerzanie** â€“ zmiana maksymalnego rozmiaru dysku.

---

## ğŸ”¸ PrzykÅ‚ad dziaÅ‚ania

1. Tworzysz VM z systemem Ubuntu.
2. Oprogramowanie tworzy plik `.vdi` o maks. rozmiarze 20 GB.
3. Ubuntu widzi ten plik jako swÃ³j dysk `/dev/sda`.
4. MoÅ¼esz instalowaÄ‡ programy, zapisywaÄ‡ pliki â€“ tak jak na fizycznym dysku.


# Czym jest pre-allocated w kontekÅ›cie wirtualnych dyskÃ³w?

**Pre-allocated** (czyli **statycznie przydzielany**) to jeden z trybÃ³w tworzenia wirtualnego dysku, w ktÃ³rym **caÅ‚a zadeklarowana przestrzeÅ„ dyskowa jest zarezerwowana na fizycznym dysku hosta w momencie tworzenia**.

---

## ğŸ”¸ Czym dokÅ‚adnie jest pre-allocated?

Gdy tworzysz np. 40 GB wirtualny dysk jako **pre-allocated**, to:
- plik wirtualnego dysku od razu zajmie **peÅ‚ne 40 GB** na fizycznym dysku hosta,
- niezaleÅ¼nie od tego, czy goÅ›Ä‡ (VM) wykorzysta 1 GB czy 20 GB danych.

---

## ğŸ”¹ Zalety pre-allocated:

- âœ… **Lepsza wydajnoÅ›Ä‡** â€“ nie trzeba dynamicznie alokowaÄ‡ przestrzeni podczas pracy maszyny wirtualnej.
- âœ… **Mniejsze ryzyko fragmentacji** â€“ dane na dysku hosta sÄ… bardziej uporzÄ…dkowane.
- âœ… **Stabilne dziaÅ‚anie** w Å›rodowiskach produkcyjnych lub obciÄ…Å¼onych I/O.

---

## ğŸ”¹ Wady pre-allocated:

- âŒ **Zajmuje duÅ¼o miejsca od razu**, nawet jeÅ›li VM uÅ¼ywa tylko czÄ™Å›ci danych.
- âŒ **DÅ‚uÅ¼szy czas tworzenia** â€“ musi utworzyÄ‡ peÅ‚ny plik zapeÅ‚niony zerami.

---

## ğŸ”¸ PorÃ³wnanie z dynamicznym dyskiem

| Cecha                       | Pre-allocated (statyczny) | Dynamiczny (dynamic)        |
|----------------------------|----------------------------|------------------------------|
| ZajÄ™toÅ›Ä‡ na dysku hosta    | Od razu peÅ‚na              | Tylko tyle, ile potrzebne    |
| WydajnoÅ›Ä‡                  | Lepsza                     | Gorsza przy duÅ¼ym obciÄ…Å¼eniu |
| Czas tworzenia VM          | DÅ‚uÅ¼szy                    | KrÃ³tszy                      |
| ZajÄ™toÅ›Ä‡ miejsca fizycznego| StaÅ‚a                      | RoÅ›nie z czasem              |

---

## ğŸ”¸ Kiedy warto uÅ¼yÄ‡ pre-allocated?

- Gdy zaleÅ¼y Ci na **wydajnoÅ›ci** (np. bazy danych, serwery plikÃ³w).
- Gdy chcesz **uniknÄ…Ä‡ nagÅ‚ego braku miejsca** na hoÅ›cie przez rozrastajÄ…ce siÄ™ dyski dynamiczne.
- W Å›rodowiskach **produkcyjnych**, gdzie przewidywalnoÅ›Ä‡ i stabilnoÅ›Ä‡ sÄ… kluczowe.
